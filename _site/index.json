{
  "Cobertura/SummaryGithub.html": {
    "href": "Cobertura/SummaryGithub.html",
    "title": "Summary | Bank App",
    "summary": "Summary Summary Generated on: 02/12/2025 - 12:44:20 Coverage date: 02/12/2025 - 12:44:10 Parser: Cobertura Assemblies: 1 Classes: 3 Files: 2 Line coverage: 22.9% (11 of 48) Covered lines: 11 Uncovered lines: 37 Coverable lines: 48 Total lines: 71 Branch coverage: 20% (2 of 10) Covered branches: 2 Total branches: 10 Method coverage: Feature is only available for sponsors Coverage Bank.WebApi - 22.9% Name Line Branch Bank.WebApi 22.9% 20% Bank.WebApi.Models.BankAccount 55% 33.3% Program 0% 0% WeatherForecast 0%"
  },
  "README.html": {
    "href": "README.html",
    "title": "SESION DE LABORATORIO N° 03: PRUEBAS ESTATICAS DE SEGURIDAD DE APLICACIONES CON SEMGREP | Bank App",
    "summary": "SESION DE LABORATORIO N° 03: PRUEBAS ESTATICAS DE SEGURIDAD DE APLICACIONES CON SEMGREP Nombre: Augusto Joaquin Rivera Muñoz OBJETIVOS Comprender el funcionamiento de las pruebas estaticas de seguridad de còdigo de las aplicaciones que desarrollamos utilizando Semgrep. REQUERIMIENTOS Conocimientos: Conocimientos básicos de Bash (powershell). Conocimientos básicos de Contenedores (Docker). Hardware: Virtualization activada en el BIOS.. CPU SLAT-capable feature. Al menos 4GB de RAM. Software: Windows 10 64bit: Pro, Enterprise o Education (1607 Anniversary Update, Build 14393 o Superior) Docker Desktop Powershell versión 7.x Python 3.1x o superior Net 8 o superior Visual Studio Code CONSIDERACIONES INICIALES Clonar el repositorio mediante git para tener los recursos necesarios Tener una cuenta de Github valida. DESARROLLO Parte I: Configuración de la herramienta de Pruebas Estaticas de Seguridad de la Aplicación Iniciar la aplicación Powershell o Windows Terminal en modo administrador En el terminal, ejecutar los siguientes comandos para instalar SEMGREP. python -m pip install semgrep python -m pip install prospector2html Cerrar el terminal para que se actualicen las variables de entorno. Parte II: Creación de la aplicación Iniciar la aplicación Powershell o Windows Terminal en modo administrador. En el terminal, Ejecutar el siguiente comando para crear una nueva solución dotnet new sln -o Bank dotnet tool install -g dll2mmd dotnet tool install -g docfx dotnet tool install -g dotnet-reportgenerator-globaltool En el terminal, Acceder a la solución creada y ejecutar el siguiente comando para crear una nueva libreria de clases y adicionarla a la solución actual. cd Bank dotnet new webapi -o Bank.WebApi dotnet sln add ./Bank.WebApi/Bank.WebApi.csproj En el terminal, Ejecutar el siguiente comando para crear un nuevo proyecto de pruebas y adicionarla a la solución actual dotnet new mstest -o Bank.WebApi.Tests dotnet sln add ./Bank.WebApi.Tests/Bank.WebApi.Tests.csproj dotnet add ./Bank.WebApi.Tests/Bank.WebApi.Tests.csproj reference ./Bank.WebApi/Bank.WebApi.csproj Iniciar Visual Studio Code (VS Code) abriendo el folder de la solución como proyecto. En el proyecto Bank.Domain, si existe un archivo Class1.cs proceder a eliminarlo. Asimismo en el proyecto Bank.Domain.Tests si existiese un archivo UnitTest1.cs, también proceder a eliminarlo. En el Visual Studio Code, en el proyecto Bank.WebApi proceder la carpeta Models y dentro de esta el archivo BankAccount.cs e introducir el siguiente código: namespace Bank.WebApi.Models { public class BankAccount { private readonly string m_customerName; private double m_balance; private BankAccount() { } public BankAccount(string customerName, double balance) { m_customerName = customerName; m_balance = balance; } public string CustomerName { get { return m_customerName; } } public double Balance { get { return m_balance; } } public void Debit(double amount) { if (amount > m_balance) throw new ArgumentOutOfRangeException(\"amount\"); if (amount < 0) throw new ArgumentOutOfRangeException(\"amount\"); m_balance -= amount; } public void Credit(double amount) { if (amount < 0) throw new ArgumentOutOfRangeException(\"amount\"); m_balance += amount; } } } En el Visual Studio Code, en el proyecto Bank.WepApi.Tests añadir un nuevo archivo BanckAccountTests.cs e introducir el siguiente código: using Bank.WebApi.Models; using NUnit.Framework; namespace Bank.Domain.Tests { public class BankAccountTests { [Test] public void Debit_WithValidAmount_UpdatesBalance() { // Arrange double beginningBalance = 11.99; double debitAmount = 4.55; double expected = 7.44; BankAccount account = new BankAccount(\"Mr. Bryan Walton\", beginningBalance); // Act account.Debit(debitAmount); // Assert double actual = account.Balance; Assert.AreEqual(expected, actual, 0.001, \"Account not debited correctly\"); } } } En el Visual Studio Code, en la raiz del proyecto crear un archivo Dockerfile con el siguiente contenido: FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS base WORKDIR /app EXPOSE 80 FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build WORKDIR /src COPY . . WORKDIR \"/src/.\" RUN dotnet restore RUN dotnet build -o /app/build FROM build AS publish RUN dotnet publish -o /app/publish /p:UseAppHost=false FROM base AS final WORKDIR /app COPY --from=publish /app/publish . ENTRYPOINT [\"dotnet\", \"Bank.WebApi.dll\"] En el Visual Studio Code, en la raiz del proyecto crear un archivo docker-compose.yml con el siguiente contenido: version: '3.4' services: webapi: image: api-bank build: context: . ports: - ${APP_HOST}:80 environment: - \"ConnectionStrings__DefaultConnection=Server=${DB_SERVER},${DB_PORT};Initial Catalog=${DB_NAME};Persist Security Info=False;User ID=${DB_USERNAME};Password=${DB_PASSWORD};MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=${TRUST_SERVER_CERTIFICATE}; Integrated Security=${INTEGRATED_SECURITY};Connection Timeout=30;\" depends_on: - \"sqlServer\" links: - \"sqlServer\" sqlServer: image: mcr.microsoft.com/mssql/server:2022-latest hostname: \"sqlserver\" environment: SA_PASSWORD: ${DB_PASSWORD} ACCEPT_EULA: \"Y\" restart: always ports: - \"${DB_PORT}:1433\" En el terminal, ejecutar el siguiente comando para ejecutar las pruebas unitarias y el reporte de cobertura dotnet test --collect:\"XPlat Code Coverage\" ReportGenerator \"-reports:./*/*/*/coverage.cobertura.xml\" \"-targetdir:Cobertura\" -reporttypes:MarkdownSummaryGithub En el terminal, ejecutar el siguiente comando para optener el diagrama de clases. dll2mmd -f Bank.WebApi/bin/Debug/net8.0/Bank.WebApi.dll -o disenio.md En el terminal, ejecutar el siguiente comando para generar el diagrama de clases respectivo docfx init -y En el Visual Studio Code, eliminar los archivos de la carpeta o directorio docs, seguidamente modificar los archivos con el siguiente contenido: docfx.json { \"$schema\": \"https://raw.githubusercontent.com/dotnet/docfx/main/schemas/docfx.schema.json\", \"metadata\": [ { \"src\": [ { \"src\": \".\", \"files\": [ \"**/*.csproj\" ] } ], \"dest\": \"docs\" } ], \"build\": { \"content\": [ { \"files\": [ \"**/*.{md,yml}\" ], \"exclude\": [ \"_site/**\" ] } ], \"resource\": [ { \"files\": [ \"images/**\" ] } ], \"output\": \"_site\", \"template\": [ \"default\", \"modern\" ], \"globalMetadata\": { \"_appName\": \"Bank.App\", \"_appTitle\": \"Bank App\", \"_enableSearch\": true, \"pdf\": true } } } toc.yml - name: Docs href: docs/ index.md --- _layout: landing --- # This is the **HOMEPAGE**. ## [Diagrama de Clases](disenio.md) ## [Pruebas](Cobertura/SummaryGithub.md) En el terminal, ejecutar el siguiente comando para generar la documentacion docfx metadata docfx.json docfx build En el terminal, ejecutar el(los) siguiente(s) comando(s) para realizar el analisis de codigo: semgrep scan --config='p/default' . --json --output semgrep.json prospector-html --input semgrep.json --output semgrep-report.html --filter semgrep En el paso anterior se genero un archivo semgrep-report.html el cual contiene el resultado del analisis que deberia ser similar a lo siguiente: En el VS Code, proceder a crear la carpeta .github/workflow y dentro de esta crear el archivo snyk.yml con el siguiente contenido. name: Semgrep Analysis env: DOTNET_VERSION: '8.x' # la versión de .NET on: push jobs: security: runs-on: ubuntu-latest container: # A Docker image with Semgrep installed. Do not change this. image: semgrep/semgrep steps: - uses: actions/checkout@v4 - uses: snyk/actions/setup@master # - name: Configurando la versión de NET # uses: actions/setup-dotnet@v4 # with: # dotnet-version: ${{ env.DOTNET_VERSION }} - name: Semgrep scan run: semgrep scan --config=\"p/default\" --sarif --output=report.sarif --metrics=off - name: Upload result to GitHub Code Scanning uses: github/codeql-action/upload-sarif@v3 with: sarif_file: report.sarif Actividades Encargadas Adicionar al archivo de semgrep.yml los pasos necesarios para generar el reporte en formato HTML y publicarlo dentro de un Github Page Completar la documentación de todas las clases y generar una automatizaciòn .github/workflows/publish_docs.yml (Github Workflow) utilizando DocFx (init, metadata y build) y publicar el site de documentaciòn generado en un Github Page. Generar una automatización de nombre .github/workflows/package_nuget.yml (Github Workflow) que ejecute: Pruebas unitarias y reporte de pruebas automatizadas Realice el analisis con SonarCloud. Contruya un archivo .nuget a partir del proyecto Bank.Domain y lo publique como un Paquete de Github Generar una automatización de nombre .github/workflows/release_version.yml (Github Workflow) que contruya la version (release) del paquete y publique en Github Releases e incluya pero ahi no esta el test unitarios"
  },
  "disenio.html": {
    "href": "disenio.html",
    "title": "| Bank App",
    "summary": "classDiagram class BankAccount BankAccount : +String CustomerName BankAccount : +Double Balance BankAccount : +Debit() Void BankAccount : +Credit() Void"
  },
  "docs/Bank.WebApi.Models.BankAccount.html": {
    "href": "docs/Bank.WebApi.Models.BankAccount.html",
    "title": "Class BankAccount | Bank App",
    "summary": "Class BankAccount Namespace Bank.WebApi.Models Assembly Bank.WebApi.dll public class BankAccount Inheritance object BankAccount Inherited Members object.Equals(object) object.Equals(object, object) object.GetHashCode() object.GetType() object.MemberwiseClone() object.ReferenceEquals(object, object) object.ToString() Constructors BankAccount(string, double) public BankAccount(string customerName, double balance) Parameters customerName string balance double Properties Balance public double Balance { get; } Property Value double CustomerName public string CustomerName { get; } Property Value string Methods Credit(double) public void Credit(double amount) Parameters amount double Debit(double) public void Debit(double amount) Parameters amount double"
  },
  "docs/Bank.WebApi.Models.html": {
    "href": "docs/Bank.WebApi.Models.html",
    "title": "Namespace Bank.WebApi.Models | Bank App",
    "summary": "Namespace Bank.WebApi.Models Classes BankAccount"
  },
  "docs/Bank.WebApi.Tests.BankAccountTests.html": {
    "href": "docs/Bank.WebApi.Tests.BankAccountTests.html",
    "title": "Class BankAccountTests | Bank App",
    "summary": "Class BankAccountTests Namespace Bank.WebApi.Tests Assembly Bank.WebApi.Tests.dll [TestClass] public class BankAccountTests Inheritance object BankAccountTests Inherited Members object.Equals(object) object.Equals(object, object) object.GetHashCode() object.GetType() object.MemberwiseClone() object.ReferenceEquals(object, object) object.ToString() Methods Debit_WithValidAmount_UpdatesBalance() [TestMethod] public void Debit_WithValidAmount_UpdatesBalance()"
  },
  "docs/Bank.WebApi.Tests.html": {
    "href": "docs/Bank.WebApi.Tests.html",
    "title": "Namespace Bank.WebApi.Tests | Bank App",
    "summary": "Namespace Bank.WebApi.Tests Classes BankAccountTests"
  },
  "index.html": {
    "href": "index.html",
    "title": "This is the HOMEPAGE. | Bank App",
    "summary": "This is the HOMEPAGE. Diagrama de Clases Pruebas"
  }
}